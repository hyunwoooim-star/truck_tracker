<!DOCTYPE html>
<html lang="ko">
<head>
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- SEO Meta Tags -->
  <meta name="description" content="íŠ¸ëŸ­ì•„ì €ì”¨ - ë‚´ ì£¼ë³€ í‘¸ë“œíŠ¸ëŸ­ ì‹¤ì‹œê°„ ì°¾ê¸°. GPS ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ ê°€ê¹Œìš´ í‘¸ë“œíŠ¸ëŸ­ì„ ì°¾ì•„ ë©”ë‰´ë¥¼ í™•ì¸í•˜ê³  ì£¼ë¬¸í•˜ì„¸ìš”. ë‹­ê¼¬ì¹˜, í˜¸ë–¡, ë¶•ì–´ë¹µ, ì‹¬ì•¼ë¼ë©˜ ë“± ë‹¤ì–‘í•œ ê¸¸ê±°ë¦¬ ìŒì‹ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ!">
  <meta name="keywords" content="í‘¸ë“œíŠ¸ëŸ­, ë‚´ ì£¼ë³€ í‘¸ë“œíŠ¸ëŸ­, ì‹¤ì‹œê°„ ìœ„ì¹˜, GPS, íŠ¸ëŸ­, ìŒì‹, ì£¼ë¬¸, ë°°ë‹¬, ìœ„ì¹˜ì¶”ì , ë§›ì§‘, íŠ¸ëŸ­ì•„ì €ì”¨, ë‹­ê¼¬ì¹˜, í˜¸ë–¡, ë¶•ì–´ë¹µ, ì‹¬ì•¼ë¼ë©˜, ë¶ˆë§‰ì°½, ì–´ë¬µ, í¬ë ˆí˜, ì˜›ë‚ í†µë‹­, ê¸¸ê±°ë¦¬ìŒì‹">
  <meta name="author" content="íŠ¸ëŸ­ì•„ì €ì”¨">
  <meta name="robots" content="index, follow">
  <meta name="geo.region" content="KR">
  <meta name="geo.placename" content="ëŒ€í•œë¯¼êµ­">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://truck-tracker.web.app/">
  <meta property="og:title" content="íŠ¸ëŸ­ì•„ì €ì”¨ - ë‚´ ì£¼ë³€ í‘¸ë“œíŠ¸ëŸ­ ì‹¤ì‹œê°„ ì°¾ê¸°">
  <meta property="og:description" content="GPS ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ ê°€ê¹Œìš´ í‘¸ë“œíŠ¸ëŸ­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì°¾ì•„ ì£¼ë¬¸í•˜ì„¸ìš”. ë‹­ê¼¬ì¹˜, í˜¸ë–¡, ë¶•ì–´ë¹µ ë“± ë‹¤ì–‘í•œ ê¸¸ê±°ë¦¬ ìŒì‹!">
  <meta property="og:image" content="icons/Icon-512.png">
  <meta property="og:locale" content="ko_KR">
  <meta property="og:site_name" content="íŠ¸ëŸ­ì•„ì €ì”¨">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://truck-tracker.web.app/">
  <meta property="twitter:title" content="íŠ¸ëŸ­ì•„ì €ì”¨ - ë‚´ ì£¼ë³€ í‘¸ë“œíŠ¸ëŸ­ ì‹¤ì‹œê°„ ì°¾ê¸°">
  <meta property="twitter:description" content="GPS ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ ê°€ê¹Œìš´ í‘¸ë“œíŠ¸ëŸ­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì°¾ì•„ ì£¼ë¬¸í•˜ì„¸ìš”.">
  <meta property="twitter:image" content="icons/Icon-512.png">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="íŠ¸ëŸ­ì•„ì €ì”¨">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <!-- Google Fonts Preconnect for faster font loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;900&family=Noto+Sans:wght@400;500;600;700;900&display=swap" rel="stylesheet">

  <title>íŠ¸ëŸ­ì•„ì €ì”¨ - ë‚´ ì£¼ë³€ í‘¸ë“œíŠ¸ëŸ­ ì‹¤ì‹œê°„ ì°¾ê¸°</title>
  <link rel="manifest" href="manifest.json">

  <!-- Google Sign-In -->
  <meta name="google-signin-client_id" content="662289034816-ine81cd5rrvseivshocvdbgv05qvv95v.apps.googleusercontent.com">
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- Theme Color -->
  <meta name="theme-color" content="#00D4FF">

  <!-- Google Maps JavaScript API -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyArKTrCQyRO-srk9hvdMevMRhOXuSF55G0"></script>

  <!-- Structured Data for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "íŠ¸ëŸ­ì•„ì €ì”¨",
    "description": "ì‹¤ì‹œê°„ í‘¸ë“œíŠ¸ëŸ­ ìœ„ì¹˜ ì¶”ì  ë° ì£¼ë¬¸ í”Œë«í¼",
    "url": "https://truck-tracker.web.app/",
    "applicationCategory": "FoodDelivery",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "KRW"
    }
  }
  </script>

  <!-- In-App Browser Warning Styles (visible by default) -->
  <style>
    #inapp-warning {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #121212;
      z-index: 99999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    #inapp-warning.hidden { display: none; }
    #inapp-warning .content { text-align: center; color: white; max-width: 320px; }
    #inapp-warning .emoji { font-size: 48px; margin-bottom: 20px; }
    #inapp-warning h1 { font-size: 24px; margin-bottom: 12px; color: #FFD43B; }
    #inapp-warning p { font-size: 16px; color: #999; margin-bottom: 24px; line-height: 1.5; }
    #inapp-warning .btn {
      display: inline-block;
      background: #FFD43B;
      color: #000;
      padding: 14px 28px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 16px;
      cursor: pointer;
      border: none;
    }
    #inapp-warning .hint { font-size: 12px; color: #666; margin-top: 16px; }
    #inapp-warning .url-box {
      background: #333;
      padding: 12px;
      border-radius: 8px;
      margin-top: 16px;
      word-break: break-all;
      font-size: 12px;
      color: #00D4FF;
    }
    /* iOS Safari Warning Styles */
    #ios-safari-warning {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #121212;
      z-index: 99998;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    #ios-safari-warning .content { text-align: center; color: white; max-width: 320px; }
    #ios-safari-warning .emoji { font-size: 48px; margin-bottom: 20px; }
    #ios-safari-warning h1 { font-size: 24px; margin-bottom: 12px; color: #FF6B6B; }
    #ios-safari-warning p { font-size: 16px; color: #999; margin-bottom: 24px; line-height: 1.5; }
    #ios-safari-warning .btn {
      display: block;
      width: 100%;
      background: #4285F4;
      color: white;
      padding: 14px 28px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 12px;
      cursor: pointer;
      border: none;
      text-align: center;
    }
    #ios-safari-warning .url-box {
      background: #333;
      padding: 12px;
      border-radius: 8px;
      margin-top: 16px;
      word-break: break-all;
      font-size: 12px;
      color: #00D4FF;
    }
    #ios-safari-warning .hint { font-size: 12px; color: #666; margin-top: 12px; }
  </style>

  <!-- Auto-detect renderer: HTML for mobile, CanvasKit for desktop -->
  <script>
    (function() {
      var ua = (navigator.userAgent || navigator.vendor || window.opera || '').toLowerCase();

      // Detect problematic WebViews
      var isKakao = ua.indexOf('kakaotalk') > -1 || ua.indexOf('kakao') > -1;
      var isLine = ua.indexOf('line') > -1;
      var isFacebook = ua.indexOf('fban') > -1 || ua.indexOf('fbav') > -1 || ua.indexOf('fb_iab') > -1;
      var isInstagram = ua.indexOf('instagram') > -1;
      var isNaverApp = (ua.indexOf('naver') > -1 && ua.indexOf('whale') === -1);
      var isGenericWebView = ua.indexOf('wv') > -1 || ua.indexOf('; wv)') > -1;

      var isInAppBrowser = isKakao || isLine || isFacebook || isInstagram || isNaverApp || isGenericWebView;

      // Detect mobile devices (iOS and Android)
      var isIOS = /iphone|ipad|ipod/.test(ua);
      var isAndroid = /android/.test(ua);
      var isMobile = isIOS || isAndroid;

      // Detect iOS Safari (iOS but not Chrome/Firefox/etc)
      var isCriOS = ua.indexOf('crios') > -1; // Chrome on iOS
      var isFxiOS = ua.indexOf('fxios') > -1; // Firefox on iOS
      var isIOSSafari = isIOS && !isCriOS && !isFxiOS && !isInAppBrowser;

      // Store for later use
      window.isInAppBrowser = isInAppBrowser;
      window.isIOSSafari = isIOSSafari;

      // Let Flutter auto-detect the best renderer
      // Don't force renderer - let the build handle it
    })();
  </script>
</head>
<body>
  <!-- iOS Safari Warning (Safari doesn't support Flutter Web properly) -->
  <div id="ios-safari-warning" style="display:none;">
    <div class="content">
      <div class="emoji">ğŸ</div>
      <h1>Safari ë¯¸ì§€ì›</h1>
      <p>ì£„ì†¡í•©ë‹ˆë‹¤. Safariì—ì„œëŠ” ì•±ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br><strong>Chrome ë¸Œë¼ìš°ì €</strong>ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”!</p>
      <a href="https://apps.apple.com/app/google-chrome/id535886823" class="btn" style="background:#4285F4;color:white;">Chrome ë‹¤ìš´ë¡œë“œ</a>
      <button class="btn" id="copyUrlSafari" style="background:#666;">ğŸ“‹ ì£¼ì†Œ ë³µì‚¬ í›„ Chromeì—ì„œ ì—´ê¸°</button>
      <div class="url-box" id="urlDisplaySafari"></div>
      <p class="hint">Chrome ì„¤ì¹˜ í›„ ìœ„ ì£¼ì†Œë¥¼ ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- In-App Browser Warning (visible by default, hidden by JS if normal browser) -->
  <div id="inapp-warning">
    <div class="content">
      <div class="emoji">ğŸšš</div>
      <h1>íŠ¸ëŸ­ì•„ì €ì”¨</h1>
      <p>ì¸ì•± ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì•±ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br><strong>ì™¸ë¶€ ë¸Œë¼ìš°ì €</strong>ë¡œ ì—´ì–´ì£¼ì„¸ìš”!</p>

      <!-- iOS: Safarië¡œ ì—´ê¸° (ê³µìœ  ë©”ë‰´) -->
      <a id="openSafari" class="btn" style="display:none;">ğŸ“¤ ê³µìœ  â†’ Safarië¡œ ì—´ê¸°</a>

      <!-- Android: Chromeìœ¼ë¡œ ì—´ê¸° -->
      <a id="openChrome" class="btn" style="display:none;">Chromeìœ¼ë¡œ ì—´ê¸°</a>

      <button class="btn" id="copyUrl" style="background:#666;">ğŸ“‹ ì£¼ì†Œ ë³µì‚¬í•˜ê¸°</button>

      <p class="hint" style="margin-top:12px;">ê³µìœ  ë©”ë‰´ê°€ ëœ¨ë©´ <strong>"Safarië¡œ ì—´ê¸°"</strong>ë¥¼ ì„ íƒí•˜ì„¸ìš”!</p>
      <div class="url-box" id="urlDisplay"></div>
      <p class="hint">ìœ„ ì£¼ì†Œë¥¼ <strong>ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬</strong> â†’<br>Safari/Chrome ì£¼ì†Œì°½ì— <strong>ë¶™ì—¬ë„£ê¸°</strong></p>
    </div>
  </div>

  <noscript>
    <div style="position:fixed;top:0;left:0;width:100%;height:100%;background:#121212;display:flex;align-items:center;justify-content:center;padding:20px;box-sizing:border-box;">
      <div style="text-align:center;color:white;">
        <div style="font-size:48px;margin-bottom:20px;">ğŸšš</div>
        <h1 style="font-size:24px;color:#FFD43B;">íŠ¸ëŸ­ì•„ì €ì”¨</h1>
        <p style="color:#999;">JavaScriptê°€ í•„ìš”í•©ë‹ˆë‹¤.<br>í¬ë¡¬ ë˜ëŠ” ì‚¬íŒŒë¦¬ì—ì„œ ì—´ì–´ì£¼ì„¸ìš”.</p>
      </div>
    </div>
  </noscript>

  <script>
    (function() {
      var warning = document.getElementById('inapp-warning');
      var urlDisplay = document.getElementById('urlDisplay');
      var copyBtn = document.getElementById('copyUrl');
      var safariBtn = document.getElementById('openSafari');
      var chromeBtn = document.getElementById('openChrome');

      var currentUrl = window.location.href;
      var ua = navigator.userAgent.toLowerCase();
      var isIOS = /iphone|ipad|ipod/.test(ua);
      var isAndroid = /android/.test(ua);

      // Show current URL
      if (urlDisplay) {
        urlDisplay.textContent = currentUrl;
      }

      // iOS: Safari ë²„íŠ¼ - ìë™ ë³µì‚¬ í›„ ì•ˆë‚´
      if (isIOS && safariBtn) {
        safariBtn.style.display = 'inline-block';
        safariBtn.textContent = 'ğŸ“‹ ì£¼ì†Œ ë³µì‚¬í•˜ê¸°';
        // iOSì—ì„œëŠ” openSafari ë²„íŠ¼ë§Œ í‘œì‹œ, copyUrl ë²„íŠ¼ ìˆ¨ê¸°ê¸° (ì¤‘ë³µ ë°©ì§€)
        if (copyBtn) {
          copyBtn.style.display = 'none';
        }
        safariBtn.href = '#';
        safariBtn.addEventListener('click', function(e) {
          e.preventDefault();

          // í´ë¦½ë³´ë“œì— URL ë³µì‚¬ ì‹œë„
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(currentUrl).then(function() {
              safariBtn.textContent = 'âœ… ë³µì‚¬ ì™„ë£Œ!';
              safariBtn.style.background = '#4CAF50';

              alert('ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n1. Safari ì•±ì„ ì—¬ì„¸ìš”\n2. ì£¼ì†Œì°½ì„ ê¸¸ê²Œ ëˆ„ë¥´ì„¸ìš”\n3. "ë¶™ì—¬ë„£ê¸° í›„ ì´ë™" ì„ íƒ');

              setTimeout(function() {
                safariBtn.textContent = 'ğŸ“‹ ì£¼ì†Œ ë³µì‚¬í•˜ê¸°';
                safariBtn.style.background = '#FFD43B';
              }, 3000);
            }).catch(function() {
              showCopyModal();
            });
          } else {
            showCopyModal();
          }

          function showCopyModal() {
            var modal = document.createElement('div');
            modal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:999999;display:flex;align-items:center;justify-content:center;padding:20px;box-sizing:border-box;';
            modal.innerHTML = '<div style="background:#1a1a1a;padding:24px;border-radius:16px;max-width:320px;text-align:center;">' +
              '<p style="color:white;margin-bottom:16px;font-size:16px;">ì•„ë˜ ì£¼ì†Œë¥¼ <strong>ê¸¸ê²Œ ëˆŒëŸ¬</strong> ë³µì‚¬:</p>' +
              '<input type="text" value="' + currentUrl + '" readonly style="width:100%;padding:12px;font-size:13px;border-radius:8px;border:2px solid #FFD43B;background:#333;color:#FFD43B;text-align:center;margin-bottom:16px;" onclick="this.select();this.setSelectionRange(0,99999);" />' +
              '<p style="color:#999;font-size:14px;margin-bottom:16px;">ë³µì‚¬ í›„ <strong>Safari</strong> ì•± ì—´ê³ <br>ì£¼ì†Œì°½ì— ë¶™ì—¬ë„£ê¸°</p>' +
              '<button style="background:#FFD43B;color:black;border:none;padding:12px 24px;border-radius:8px;font-size:16px;font-weight:bold;cursor:pointer;width:100%;">í™•ì¸</button>' +
              '</div>';
            document.body.appendChild(modal);
            modal.querySelector('button').addEventListener('click', function() {
              document.body.removeChild(modal);
            });
            modal.querySelector('input').focus();
            modal.querySelector('input').select();
          }
        });
      }

      // Android: Chrome ë²„íŠ¼ í‘œì‹œ ë° Intent ì„¤ì •
      if (isAndroid && chromeBtn) {
        chromeBtn.style.display = 'inline-block';
        // Android Intentë¡œ Chrome ì—´ê¸°
        var intentUrl = 'intent://' + currentUrl.replace(/https?:\/\//, '') +
          '#Intent;scheme=https;package=com.android.chrome;end';
        chromeBtn.href = intentUrl;
      }

      // Copy URL button
      if (copyBtn) {
        copyBtn.addEventListener('click', function() {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(currentUrl).then(function() {
              copyBtn.textContent = 'ë³µì‚¬ ì™„ë£Œ! âœ“';
              copyBtn.style.background = '#4CAF50';
              setTimeout(function() {
                copyBtn.textContent = 'ì£¼ì†Œ ë³µì‚¬í•˜ê¸°';
                copyBtn.style.background = '#666';
              }, 2000);
            }).catch(function() {
              fallbackCopy();
            });
          } else {
            fallbackCopy();
          }

          function fallbackCopy() {
            // í´ë°±: ì„ íƒ ê°€ëŠ¥í•œ ì¸í’‹ ìƒì„±
            var input = document.createElement('input');
            input.value = currentUrl;
            input.style.position = 'fixed';
            input.style.top = '50%';
            input.style.left = '10%';
            input.style.width = '80%';
            input.style.padding = '10px';
            input.style.fontSize = '14px';
            input.style.zIndex = '999999';
            document.body.appendChild(input);
            input.select();
            input.setSelectionRange(0, 99999);
            try {
              document.execCommand('copy');
              copyBtn.textContent = 'ë³µì‚¬ ì™„ë£Œ! âœ“';
              copyBtn.style.background = '#4CAF50';
            } catch (err) {
              alert('ì£¼ì†Œë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•˜ì„¸ìš”:\n' + currentUrl);
            }
            document.body.removeChild(input);
            setTimeout(function() {
              copyBtn.textContent = 'ì£¼ì†Œ ë³µì‚¬í•˜ê¸°';
              copyBtn.style.background = '#666';
            }, 2000);
          }
        });
      }

      // Hide warning if NOT in-app browser
      if (!window.isInAppBrowser && warning) {
        warning.classList.add('hidden');
      }

      // iOS Safari Warning
      var iosSafariWarning = document.getElementById('ios-safari-warning');
      var copyUrlSafari = document.getElementById('copyUrlSafari');
      var urlDisplaySafari = document.getElementById('urlDisplaySafari');

      if (window.isIOSSafari && iosSafariWarning) {
        // Show iOS Safari warning
        iosSafariWarning.style.display = 'flex';
        if (urlDisplaySafari) {
          urlDisplaySafari.textContent = currentUrl;
        }

        // Copy button for Safari users
        if (copyUrlSafari) {
          copyUrlSafari.addEventListener('click', function() {
            if (navigator.clipboard && navigator.clipboard.writeText) {
              navigator.clipboard.writeText(currentUrl).then(function() {
                copyUrlSafari.textContent = 'âœ… ë³µì‚¬ ì™„ë£Œ!';
                copyUrlSafari.style.background = '#4CAF50';
                setTimeout(function() {
                  copyUrlSafari.textContent = 'ğŸ“‹ ì£¼ì†Œ ë³µì‚¬ í›„ Chromeì—ì„œ ì—´ê¸°';
                  copyUrlSafari.style.background = '#666';
                }, 2000);
              }).catch(function() {
                alert('ì£¼ì†Œë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•˜ì„¸ìš”:\n' + currentUrl);
              });
            } else {
              alert('ì£¼ì†Œë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ë³µì‚¬í•˜ì„¸ìš”:\n' + currentUrl);
            }
          });
        }

        // Don't load Flutter for iOS Safari
        return;
      }

      // Only load Flutter if NOT in-app browser AND NOT iOS Safari
      if (!window.isInAppBrowser && !window.isIOSSafari) {
        var script = document.createElement('script');
        script.src = 'flutter_bootstrap.js';
        script.async = true;
        document.body.appendChild(script);
      }
    })();
  </script>
</body>
</html>
